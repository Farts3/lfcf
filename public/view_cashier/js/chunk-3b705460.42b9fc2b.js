(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b705460"],{5671:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Modal",{attrs:{scrollable:"","footer-hide":"",closable:"",title:"店员列表","mask-closable":!1,width:"900"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("Row",{staticClass:"mb10"},[r("Col",[r("Input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入用户名称/ID/手机号","element-id":"nickname",search:"","enter-button":""},on:{"on-search":t.storeSearch},model:{value:t.userFrom.keyword,callback:function(e){t.$set(t.userFrom,"keyword",e)},expression:"userFrom.keyword"}})],1)],1),t.dataList.length?r("div",{staticClass:"store-people",on:{scroll:t.getList}},[r("div",{staticClass:"store-list"},t._l(t.dataList,(function(e,a){return r("div",{key:a,staticClass:"item",class:t.id===e.id?"on":"",on:{click:function(a){return t.selectStore(e)}}},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:e.avatar,alt:""}})]),r("div",{staticClass:"msg"},[r("div",{staticClass:"msg-top"},[r("span",{staticClass:"name"},[t._v(t._s(e.staff_name))]),r("span",{staticClass:"id"},[t._v("(id:"+t._s(e.id)+")")])]),r("div",{staticClass:"msg-btn"},[t._v("\n              手机号:"+t._s(e.phone)+"\n            ")])])])})),0)]):r("div",{staticClass:"no-cump"},[r("img",{attrs:{src:a("7b15"),alt:""}}),r("span",{staticClass:"trip"},[t._v("sorry～目前暂无店员")])])],1)],1)},n=[],s=a("c24f"),i={name:"userList",props:{storeInfo:{type:Object,default:function(){}}},data:function(){return{id:0,modals:!1,total:0,userFrom:{keyword:"",page:1,limit:12},loading:!1,dataList:[],currentid:"",search:!1}},created:function(){this.getList()},watch:{storeInfo:function(t,e){this.id=t.id}},methods:{selectStore:function(t){this.modals=!1,this.$emit("getStoreId",t)},getList:function(t,e){var a=this;this.loading=!0,(!t||t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<=0&&this.dataList.length<this.total)&&Object(s["b"])(this.userFrom).then((function(e){a.loading=!1,a.total=e.data.count;var r=e.data.staffList,n=e.data.staffInfo;a.dataList=r,!a.search&&t||(a.$emit("getUserInfo",{users:n,storeList:r}),a.search=!1)})).catch((function(t){a.loading=!1,a.$Message.error(t.msg)}))},storeSearch:function(){this.userFrom.page=1,this.search=!0,this.getList()},cancel:function(){this.currentid=""},pageChange:function(t){this.userFrom.page=t,this.getList()}}},c=i,o=(a("e0ab"),a("2877")),u=Object(o["a"])(c,r,n,!1,null,"38f2f32a",null);e["a"]=u.exports},"653d":function(t,e,a){t.exports=a.p+"view_cashier/img/tourist.908b01d3.png"},"6d86":function(t,e,a){},"7b15":function(t,e,a){t.exports=a.p+"view_cashier/img/no-staff.f767c215.png"},"8c65":function(t,e,a){"use strict";var r=a("c92f"),n=a.n(r);n.a},ad18:function(t,e,a){t.exports=a.p+"view_cashier/img/gold.67ecfa42.png"},b89c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Modal",{attrs:{width:"583"},on:{"on-cancel":t.clear},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("Tabs",{on:{"on-click":t.changeTabs},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[r("TabPane",{attrs:{label:"优惠充值",name:"0"}}),r("TabPane",{attrs:{label:"自定义充值",name:"1"}})],1),r("div",{staticClass:"discount"},[t.userInfo?r("div",{staticClass:"infoData acea-row row-middle"},[r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:t.userInfo.avatar}})]),r("div",{staticClass:"info"},[r("span",[t._v(t._s(t.userInfo.nickname)+"(ID: "+t._s(t.userInfo.uid)+")")]),r("span",[t._v("余额："+t._s(t.userInfo.now_money))]),r("span",[t._v("积分："+t._s(t.userInfo.integral))])])]):t._e(),0==t.currentTab?r("div",{staticClass:"list"},t._l(t.moneyList,(function(e,a){return r("div",{staticClass:"item",class:t.active==a?"on":"",on:{click:function(r){return t.activeMoney(a,e)}}},[r("div",{staticClass:"money"},[r("span",[t._v("¥")]),t._v(t._s(e.price))]),r("div",[t._v("额外赠送：¥ "+t._s(e.give_money))])])})),0):t._e(),1==t.currentTab?r("div",{staticClass:"custom"},[r("InputNumber",{staticClass:"inputNum",attrs:{size:"large",min:1},model:{value:t.payPrice,callback:function(e){t.payPrice=e},expression:"payPrice"}}),r("div",{staticClass:"tip"},[t._v("自定义充值的金额无赠送优惠")])],1):t._e()]),r("div",{staticClass:"acea-row row-center-wrapper",attrs:{slot:"footer"},slot:"footer"},[r("Button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1),r("Modal",{staticClass:"modalPay",attrs:{"footer-hide":"",width:"430px"},on:{"on-cancel":t.yuePayClear},model:{value:t.modalPay,callback:function(e){t.modalPay=e},expression:"modalPay"}},[r("div",{staticClass:"payPage"},[r("div",{staticClass:"header acea-row row-center-wrapper"},[r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:a("ad18")}})]),r("div",{staticClass:"text"},[t._v("应收金额(元)")])]),r("div",{staticClass:"money"},[t._v("¥"),r("span",{staticClass:"num"},[t._v(t._s(t.rechargeData.price))])]),r("Input",{ref:"rechargeNum",staticStyle:{"margin-top":"16px"},attrs:{size:"large",type:"url",placeholder:"请点击输入框聚焦扫码或输入编码号"},on:{input:t.inputSaoMa},model:{value:t.payNum,callback:function(e){t.payNum=e},expression:"payNum"}}),r("div",{staticClass:"process"},[r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:a("fbde")}})]),r("div",{staticClass:"list acea-row row-between-wrapper"},[r("div",{staticClass:"item one"},[r("div",{staticClass:"name"},[t._v("出示付款码")]),r("div",[t._v("支付宝/微信")])]),r("div",{staticClass:"item two"},[r("div",{staticClass:"name"},[t._v("扫描付款码")]),r("div",[t._v("扫码枪")])]),r("div",{staticClass:"item three"},[r("div",{staticClass:"name"},[t._v("确认收款")]),r("div",[t._v("收银台点击确认")])])])])],1)])],1)},n=[],s=a("c24f"),i={name:"recharge",props:{userInfo:{type:Object,default:function(){}}},data:function(){return{modal:!1,timer:null,currentTab:0,moneyList:[],active:0,modalPay:!1,payNum:"",payPrice:1,rechargeData:{uid:0,price:"",rechar_id:0,pay_type:3,auth_code:""},givePrice:0,totalPrice:0}},watch:{modal:function(t){if(t){var e=this;document.onkeydown=function(t){13==t.which&&e.payNum&&(e.rechargeData.auth_code=e.payNum,e.confirm())}}}},created:function(){this.getList()},methods:{clear:function(){this.payPrice=0,this.currentTab="0"},yuePayClear:function(){this.$Message.destroy(),this.timer&&(clearInterval(this.timer),this.timer=null)},inputSaoMa:function(t){},changeTabs:function(t){0==t&&(this.active=0)},getList:function(){var t=this;Object(s["s"])().then((function(e){t.moneyList=e.data.recharge_quota}))},activeMoney:function(t,e){this.active=t},save:function(){var t=this;this.modalPay=!0,this.$nextTick((function(){t.$refs.rechargeNum.focus()})),1==this.currentTab?(this.rechargeData.rechar_id=0,this.givePrice=0,this.rechargeData.price=this.payPrice):(this.rechargeData.price=this.moneyList[this.active].price,this.rechargeData.rechar_id=this.moneyList[this.active].id,this.givePrice=this.moneyList[this.active].give_money),this.totalPrice=this.$computes.Add(this.rechargeData.price,this.givePrice)},confirm:function(){var t=this;this.rechargeData.uid=this.userInfo.uid,Object(s["t"])(this.rechargeData).then((function(e){t.payNum="";var a=e.data.status,r=e.data.data.order_id;switch(a){case"SUCCESS":t.$Message.success("支付成功"),t.modalPay=!1,t.modal=!1,t.$emit("getSuccess",t.totalPrice);break;case"PAY_ING":var n=t.$Message.loading({content:"等待支付中...",duration:0});t.checkOrderTime(r,n);break;default:t.$Message.warning("支付失败");break}})).catch((function(e){t.payNum="",t.$Message.error(e.msg)}))},checkOrderTime:function(t,e){var a=this,r=1,n=this.timer=setInterval((function(){a.checkOrder(t,n,e),r++,r>=60&&(clearInterval(n),e(),a.$Message.success("支付失败"))}),1e3)},checkOrder:function(t,e,a){var r=this;Object(s["c"])(1,{order_id:t}).then((function(t){1==t.data.status&&(a(),r.$Message.success("支付成功"),r.$emit("getSuccess",r.totalPrice),r.modalPay=!1,r.modal=!1,clearInterval(e))})).catch((function(t){a(),r.$Message.error(t.msg)}))}}},c=i,o=(a("8c65"),a("2877")),u=Object(o["a"])(c,r,n,!1,null,"093b7696",null);e["a"]=u.exports},c24f:function(t,e,a){"use strict";a.d(e,"w",(function(){return n})),a.d(e,"p",(function(){return s})),a.d(e,"q",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"v",(function(){return o})),a.d(e,"o",(function(){return u})),a.d(e,"r",(function(){return l})),a.d(e,"b",(function(){return d})),a.d(e,"z",(function(){return f})),a.d(e,"f",(function(){return h})),a.d(e,"j",(function(){return m})),a.d(e,"d",(function(){return p})),a.d(e,"h",(function(){return v})),a.d(e,"u",(function(){return g})),a.d(e,"s",(function(){return b})),a.d(e,"y",(function(){return _})),a.d(e,"t",(function(){return y})),a.d(e,"x",(function(){return C})),a.d(e,"l",(function(){return w})),a.d(e,"n",(function(){return O})),a.d(e,"c",(function(){return j})),a.d(e,"m",(function(){return k})),a.d(e,"k",(function(){return P})),a.d(e,"g",(function(){return I})),a.d(e,"e",(function(){return L})),a.d(e,"i",(function(){return x}));var r=a("b6bd");function n(){return Object(r["a"])({url:"user/user_label_cate",method:"get"})}function s(){return Object(r["a"])({url:"user/user_label_cate/create",method:"get"})}function i(t){return Object(r["a"])({url:"user/user_label_cate/".concat(t,"/edit"),method:"get"})}function c(t){return Object(r["a"])({url:"user/user_label",method:"get",params:t})}function o(){return Object(r["a"])({url:"user/user_label/create",method:"get"})}function u(t){return Object(r["a"])({url:"user/user_label/".concat(t,"/edit"),method:"get"})}function l(t){return Object(r["a"])({url:"user/get_list",method:"get",params:t})}function d(t){return Object(r["a"])({url:"user/cashier_list",method:"get",params:t})}function f(t){return Object(r["a"])({url:"user/search",method:"get",params:t})}function h(t){return Object(r["a"])({url:"user/label/".concat(t),method:"get"})}function m(t,e){return Object(r["a"])({url:"user/label/".concat(t),method:"post",data:e})}function p(t){return Object(r["a"])({url:"user/info/".concat(t),method:"get"})}function v(t){return Object(r["a"])({url:"user/record/".concat(t.id),method:"get",params:t.datas})}function g(t){return Object(r["a"])({url:"user/set_label",method:"post",data:t})}function b(){return Object(r["a"])({url:"store/recharge_info",method:"get"})}function _(){return Object(r["a"])({url:"user/member/ship",method:"get"})}function y(t){return Object(r["a"])({url:"store/recharge",method:"post",data:t})}function C(t){return Object(r["a"])({url:"/user/member",method:"post",data:t})}function w(t){return Object(r["a"])({url:"staff/binding/user",method:"post",data:t})}function O(t){return Object(r["a"])({url:"updatePwd",method:"PUT",data:t})}function j(t,e){return Object(r["a"])({url:"check_order_status/".concat(t),method:"post",data:e})}function k(){return Object(r["a"])({url:"user/cashier_info ",method:"get"})}function P(t){return Object(r["a"])({url:"user/read/".concat(t),method:"get"})}function I(t,e){return Object(r["a"])({url:"user/one_info/".concat(t),method:"get",params:e})}function L(t){return Object(r["a"])({url:"user/member_card",method:"get",params:t})}function x(t){return Object(r["a"])({url:"user/mer_recharge",method:"post",data:t})}},c92f:function(t,e,a){},e0ab:function(t,e,a){"use strict";var r=a("6d86"),n=a.n(r);n.a},fbde:function(t,e,a){t.exports=a.p+"view_cashier/img/process1.617f1e82.png"}}]);