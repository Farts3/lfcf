(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/authorize/index"],{3908:function(e,t,o){"use strict";(function(e){var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o("5679"),a=(o("401c"),o("4818")),s=n(o("565c")),d=(n(o("150e")),n(o("5c3b"))),c=getApp(),u={mixins:[d.default],props:{isShowAuth:{type:Boolean,default:!1}},data:function(){return{isShow:!1,isUp:!1,phone:"",isPhoneBox:!1,logoUrl:"",code:"",authKey:"",options:"",userInfo:{},codeNum:0,canUseGetUserProfile:!1,mp_is_new:this.$Cache.get("MP_VERSION_ISNEW")||!1}},components:{routinePhone:function(){o.e("components/loginMobile/routine_phone").then(function(){return resolve(o("0ce9"))}.bind(null,o)).catch(o.oe)},editUserModal:function(){Promise.all([o.e("common/vendor"),o.e("components/eidtUserModal/index")]).then(function(){return resolve(o("1405"))}.bind(null,o)).catch(o.oe)}},mounted:function(t){var o=this;e.getUserProfile&&(this.canUseGetUserProfile=!0),(0,i.getLogo)().then((function(e){o.logoUrl=e.data.logo_url}));s.default.getCode().then((function(e){o.code=e}))},methods:{close:function(){this.$emit("authColse",!1)},privacy:function(t){e.navigateTo({url:"/pages/users/privacy/index?type="+t})},userLogin:function(){var t=this;s.default.getCode().then((function(o){e.showLoading({title:"正在登录中"}),(0,i.authLogin)({code:o,spread_spid:c.globalData.spid,spread_code:c.globalData.code}).then((function(o){if(void 0!==o.data.key&&o.data.key)e.hideLoading(),t.authKey=o.data.key,t.isPhoneBox=!0;else{e.hideLoading();var n=o.data.expires_time-t.$Cache.time();t.$store.commit("LOGIN",{token:o.data.token,time:n}),t.getUserInfo(o.data.store_user_avatar||0)}}))})).catch((function(t){e.hideLoading(),e.showToast({title:t,icon:"none",duration:2e3})}))},editSuccess:function(){this.isShow=!1,this.$emit("onLoadFun")},closeEdit:function(){this.isShow=!1,this.$emit("onLoadFun"),this.$util.Tips({title:"登录成功",icon:"success"})},bindPhoneClose:function(t){t.isStatus?(e.hideLoading(),this.isPhoneBox=!1,t.store_user_avatar?this.isShow=!0:(this.$emit("onLoadFun"),this.$util.Tips({title:"登录成功",icon:"success"}))):this.isPhoneBox=!1},getUserInfo:function(t){var o=this;(0,a.getUserInfo)().then((function(n){e.hideLoading(),o.userInfo=n.data,o.$store.commit("SETUID",n.data.uid),o.$store.commit("UPDATE_USERINFO",n.data),t?o.isShow=!0:(o.$emit("onLoadFun"),o.$util.Tips({title:"登录成功",icon:"success"}))}))},setUserInfo:function(t){var o=this;this.close(),e.showLoading({title:"正在登录中"}),s.default.getCode().then((function(e){o.getWxUser(e)})).catch((function(t){e.hideLoading()}))},getUserProfile:function(){var t=this;this.close(),e.showLoading({title:"正在登录中"});var o=this;s.default.getUserProfile().then((function(n){var i=n.userInfo;i.code=t.code,i.spread_spid=c.globalData.spid||t.$Cache.get("spid"),i.spread_code=c.globalData.code,s.default.authUserInfo(i).then((function(n){if(void 0!==n.data.key&&n.data.key)e.hideLoading(),o.authKey=n.data.key,o.isPhoneBox=!0;else{e.hideLoading();var i=n.data.expires_time-o.$Cache.time();o.$store.commit("LOGIN",{token:n.data.token,time:i}),t.getUserInfo()}})).catch((function(t){e.hideLoading(),e.showToast({title:t.msg,icon:"none",duration:2e3})}))})).catch((function(t){e.hideLoading()}))},getWxUser:function(t){var o=this;s.default.getUserInfo().then((function(n){var i=n.userInfo;i.code=t,i.spread_spid=c.globalData.spid,i.spread_code=c.globalData.code,s.default.authUserInfo(i).then((function(t){if(void 0!==t.data.key&&t.data.key)e.hideLoading(),o.authKey=t.data.key,o.isPhoneBox=!0;else{e.hideLoading();var n=t.data.expires_time-o.$Cache.time();o.$store.commit("LOGIN",{token:t.data.token,time:n}),o.$emit("onLoadFun"),o.$util.Tips({title:t.msg,icon:"success"})}})).catch((function(t){e.hideLoading(),e.showToast({title:t.msg,icon:"none",duration:2e3})}))})).catch((function(t){e.hideLoading()}))}}};t.default=u}).call(this,o("543d")["default"])},"3a71":function(e,t,o){},9048:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},i=[]},a3dd:function(e,t,o){"use strict";o.r(t);var n=o("9048"),i=o("c066");for(var a in i)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(a);o("fe90");var s=o("f0c5"),d=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=d.exports},c066:function(e,t,o){"use strict";o.r(t);var n=o("3908"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},fe90:function(e,t,o){"use strict";var n=o("3a71"),i=o.n(n);i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/authorize/index-create-component',
    {
        'components/authorize/index-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("a3dd"))
        })
    },
    [['components/authorize/index-create-component']]
]);
