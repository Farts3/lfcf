require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_pwd_edit/index"],{"1cd6":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},o=[]},"31e2":function(e,t,n){"use strict";n.r(t);var i=n("89d0"),o=n.n(i);for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);t["default"]=o.a},"416e":function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("59a4");i(n("66fd"));var o=i(n("65c5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"65c5":function(e,t,n){"use strict";n.r(t);var i=n("1cd6"),o=n("31e2");for(var u in o)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(u);n("7c1a");var r=n("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports},"7c1a":function(e,t,n){"use strict";var i=n("e8ca"),o=n.n(i);o.a},"89d0":function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("2eee")),u=i(n("c973")),r=i(n("0e3e")),s=n("3c98"),a=n("4818"),c=(n("8e8a"),n("26cb")),f=i(n("5c3b")),d={mixins:[r.default,f.default],components:{Verify:function(){n.e("pages/users/components/verify/verify").then(function(){return resolve(n("ef0f"))}.bind(null,n)).catch(n.oe)}},data:function(){return{userInfo:{},phone:"",password:"",qr_password:"",isAuto:!1,isShowAuth:!1,key:""}},computed:(0,c.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(e,t){},deep:!0}},onLoad:function(){this.isLogin?(this.getUserInfo(),this.getVerifyCode()):this.isShowAuth=!0},onShow:function(){e.removeStorageSync("form_type_cart")},methods:{onLoadFun:function(e){this.getUserInfo(),this.getVerifyCode(),this.isShowAuth=!1},authColse:function(e){this.isShowAuth=e},getVerifyCode:function(){var e=this;(0,s.verifyCode)().then((function(t){e.$set(e,"key",t.data.key)}))},getUserInfo:function(){var e=this;(0,a.getUserInfo)().then((function(t){var n=t.data.phone,i=n.substr(0,3)+"****"+n.substr(7);e.$set(e,"userInfo",t.data),e.phone=i}))},success:function(e){var t=this;this.$refs.verify.hide(),(0,a.getCodeApi)().then((function(n){t.keyCode=n.data.key,t.getCode(e)})).catch((function(e){t.$util.Tips({title:e})}))},code:function(e){if(!this.userInfo.phone)return this.$util.Tips({title:"手机号码不存在,无法发送验证码！"});this.$refs.verify.show()},getCode:function(e){var t=this;return(0,u.default)(o.default.mark((function n(){var i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t,n.next=4,(0,s.registerVerify)({phone:i.userInfo.phone,type:"reset",key:i.key,captchaType:"blockPuzzle",captchaVerification:e.captchaVerification}).then((function(e){i.$util.Tips({title:e.msg}),i.sendCode()})).catch((function(e){i.$util.Tips({title:e})}));case 4:case"end":return n.stop()}}),n)})))()},editPwd:function(t){var n=this,i=t.detail.value.password,o=t.detail.value.qr_password,u=t.detail.value.captcha;return i?o!=i?n.$util.Tips({title:"两次输入的密码不一致！"}):u?void(0,s.phoneRegisterReset)({account:n.userInfo.phone,captcha:u,password:i}).then((function(t){e.reLaunch({url:"/pages/users/login/index"})})).catch((function(e){return n.$util.Tips({title:e})})):n.$util.Tips({title:"请输入验证码"}):n.$util.Tips({title:"请输入新密码"})}}};t.default=d}).call(this,n("543d")["default"])},e8ca:function(e,t,n){}},[["416e","common/runtime","common/vendor","pages/users/common/vendor"]]]);