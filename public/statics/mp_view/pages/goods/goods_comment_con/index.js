require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_comment_con/index"],{"1db5":function(t,i,e){"use strict";e.r(i);var n=e("d1b0"),o=e("6124");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e("f9ef");var u=e("f0c5"),c=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"cee84d34",null,!1,n["a"],void 0);i["default"]=c.exports},"28e8":function(t,i,e){"use strict";(function(t,i){var n=e("4ea4");e("59a4");n(e("66fd"));var o=n(e("1db5"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(o.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},6124:function(t,i,e){"use strict";e.r(i);var n=e("7d5c"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},"7d5c":function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e("bcf5"),s=(e("8e8a"),e("26cb")),u=n(e("5c3b")),c={components:{},mixins:[u.default],data:function(){return{pics:[],scoreList:[{name:"商品质量",stars:["","","","",""],index:-1},{name:"服务态度",stars:["","","","",""],index:-1}],orderId:"",unique:"",productInfo:{},cart_num:0,isAuto:!1,isShowAuth:!1,canvasWidth:"",canvasHeight:"",canvasStatus:!1}},computed:(0,s.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,i){},deep:!0}},onLoad:function(t){if(!t.unique||!t.uni)return this.$util.Tips({title:"缺少参数"},{tab:3,url:1});this.unique=t.unique,this.orderId=t.uni,this.isLogin&&this.getOrderProduct()},onShow:function(){t.removeStorageSync("form_type_cart"),this.isLogin||(this.isShowAuth=!0)},methods:{onLoadFun:function(){this.getOrderProduct(),this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},getOrderProduct:function(){var t=this;(0,o.orderProduct)(t.unique).then((function(i){t.$set(t,"productInfo",i.data.productInfo),t.cart_num=i.data.cart_num}))},stars:function(t,i){this.scoreList[i].index=t},DelPic:function(t){this.pics[t];this.pics.splice(t,1),this.$set(this,"pics",this.pics)},uploadpic:function(){var t=this,i=this;this.canvasStatus=!0,i.$util.uploadImageChange({count:8,url:"upload/image"},(function(t){i.pics.push(t.data.url)}),(function(i){t.canvasStatus=!1}),(function(i){t.canvasWidth=i.w,t.canvasHeight=i.h}))},formSubmit:function(i){i.detail.formId;var e=i.detail.value,n=this,s=n.scoreList[0].index+1===0?"":n.scoreList[0].index+1,u=n.scoreList[1].index+1===0?"":n.scoreList[1].index+1;if(!e.comment)return n.$util.Tips({title:"请填写你对宝贝的心得！"});e.product_score=s,e.service_score=u,e.pics=n.pics,e.unique=n.unique,t.showLoading({title:"正在发布评论……"}),(0,o.orderComment)(e).then((function(i){t.hideLoading();i.data.to_lottery,n.orderId;var e={tab:3,url:1},o=getCurrentPages();o[o.length-3]&&"pages/goods/order_pay_status/index"==o[o.length-3].route&&(e.tab=5,e.url="/pages/goods/order_list/index"),i.data.to_lottery&&(e.tab=5,e.url="/pages/goods/goods_comment_con/lottery_comment?type=4&order_id="+n.orderId),n.$util.Tips({title:"感谢您的评价!",icon:"success"},e)})).catch((function(i){return t.hideLoading(),n.$util.Tips({title:i})}))}}};i.default=c}).call(this,e("543d")["default"])},"879c":function(t,i,e){},d1b0:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){}));var n=function(){var t=this.$createElement,i=(this._self._c,this.pics.length);this.$mp.data=Object.assign({},{$root:{g0:i}})},o=[]},f9ef:function(t,i,e){"use strict";var n=e("879c"),o=e.n(n);o.a}},[["28e8","common/runtime","common/vendor"]]]);