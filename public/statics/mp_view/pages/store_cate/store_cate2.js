(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store_cate/store_cate2"],{2598:function(e,t,i){"use strict";var s=i("7c0f"),r=i.n(s);r.a},"44aa":function(e,t,i){"use strict";(function(e){var s=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(i("9523")),o=i("26cb"),n=i("8bb5"),a=i("3e4f"),c=i("865e"),d=i("f8b7"),l=i("4818");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g=e.getSystemInfoSync().statusBarHeight,f={components:{filterPopup:function(){i.e("components/filterPopup/index").then(function(){return resolve(i("5607"))}.bind(null,i)).catch(i.oe)},waterfallsFlow:function(){i.e("components/maramlee-waterfalls-flow/maramlee-waterfalls-flow").then(function(){return resolve(i("7c97"))}.bind(null,i)).catch(i.oe)},Kefu:function(){i.e("components/kefu/index").then(function(){return resolve(i("18e2"))}.bind(null,i)).catch(i.oe)},addressWindow:function(){i.e("components/addressWindow/index").then(function(){return resolve(i("a8a7"))}.bind(null,i)).catch(i.oe)}},props:{info:{type:Object,default:{}},customerType:{type:Number,default:1},cart_num:{type:Number,default:0}},computed:h(h({},(0,o.mapState)({cartNum:function(e){return e.indexData.cartNum}})),(0,o.mapGetters)(["isLogin","uid","cartNum"])),data:function(){return{statusBarHeight:g,imgHost:c.HTTP_REQUEST_URL,price:0,stock:0,productList:[],customerList:[],storeCategory:[],storeBrand:[],show:!1,active:1,where:{cid:0,sid:0,keyword:"",priceOrder:"",salesOrder:"",news:0,page:1,limit:5,store_id:0,brand_id:""},loading:!1,loadend:!1,loadTitle:"加载更多",deliveryList:[{name:"自提",key:2,icon:"icon-ziti"},{name:"配送",key:1,icon:"icon-peisong1"}],collageVisible:!1,collageDelivery:2,collageAddress:{},collageStore:this.info,address:{address:!1},pagesUrl:"",isShowAuth:!1,isSplicingPlatform:!0}},mounted:function(){var t=this;this.isSplicingPlatform&&this.info.store_splicing_switch&&(this.collageDelivery=this.info.is_store?2:1,e.$on("activeFn",(function(e){t.collageStore=e})),e.$on("addressChange",(function(e){t.collageAddress=e,t.address.addressId=e.id})))},methods:{showMaoLocation:function(){var t={latitude:Number(this.collageStore.latitude),longitude:Number(this.collageStore.longitude),name:this.collageStore.name,address:"".concat(this.collageStore.address,"-").concat(this.collageStore.detailed_address)};e.openLocation(t)},authColse:function(e){this.isShowAuth=e},onLoadFun:function(){setTimeout((function(){this.isShowAuth=!1}),10)},brandChange:function(e){this.where.brand_id=e},categoryChange:function(e){this.where.cid=e.cid,this.where.sid=e.sid},submitFn:function(e){1==e?(this.getProducts(!0),this.$refs.popup.visible=!1):2==e&&(this.where.brand_id="",this.where.cid="",this.where.sid="",this.getProducts(!0),this.$refs.popup.visible=!1)},goMap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.navigateTo({url:"/pages/store/map/index?storeFrom=1&type=1&storeId=".concat(t?this.collageStore.id:this.info.id,"&isCollage=").concat(t)})},goKefu:function(){this.getCustomerList(),this.$refs.kefu.show=!0},shoppCart:function(){e.switchTab({url:"/pages/order_addcart/order_addcart"})},closeKefu:function(){this.$refs.kefu.show=!1},getCustomerList:function(){var e=this;(0,n.getCustomerList)(this.where.store_id).then((function(t){e.customerList=t.data}))},godDetail:function(t){this.currentPage=!1,this.promotions_type?e.navigateTo({url:"/pages/goods_details/index?id=".concat(t.id)}):(0,a.goShopDetail)(t,this.uid).then((function(i){e.navigateTo({url:"/pages/goods_details/index?id=".concat(t.id)})}))},set_where:function(e){switch(e){case 1:this.active=1,this.where.priceOrder="",this.where.salesOrder="",this.where.brand_id="",this.price=0;break;case 2:0==this.price?this.price=1:1==this.price?this.price=2:2==this.price&&(this.price=0),1==this.price?this.where.priceOrder="asc":2==this.price?this.where.priceOrder="desc":this.where.priceOrder="",this.active=2,this.stock=0;break;case 3:0==this.stock?this.stock=1:1==this.stock?this.stock=2:2==this.stock&&(this.stock=0),1==this.stock?(this.where.priceOrder="",this.where.salesOrder="asc"):2==this.stock?(this.where.priceOrder="",this.where.salesOrder="desc"):this.where.salesOrder="",this.active=3,this.price=0;break;case 4:this.getStoreCategory(),this.getStoreBrand(),this.$refs.popup.visible=!0,this.loadend=!1,this.loading=!1;break}e<4&&(this.loadend=!1,this.$set(this.where,"page",1),this.getProducts(!0))},getProducts:function(e){var t=this;t.loadend||t.loading||(!0===e&&(t.$refs.waterfallsFlow.refresh(),t.where.page=1,t.$set(t,"productList",[])),t.loading=!0,t.loadTitle="",(0,n.getProducts)(this.where).then((function(e){var i=e.data,s=t.$util.SplitArray(i,t.productList),r=i.length<t.where.limit;t.loadend=r,t.loading=!1,t.loadTitle=r?"没有更多内容啦~":"加载更多",t.$set(t,"productList",s),t.$set(t.where,"page",t.where.page+1)})).catch((function(e){t.loading=!1,t.loadTitle="加载更多"})))},getStoreCategory:function(){var e=this;(0,n.getStoreCategory)({pid:0}).then((function(t){t.data.map((function(t){e.$set(t,"disabled",!1),e.$set(t,"current",-1),t.children.unshift({id:0,cate_name:"全部"})})),e.storeCategory=t.data}))},getStoreBrand:function(){var e=this;(0,n.getStoreBrand)(this.where).then((function(t){e.storeBrand=t.data}))},onReachBottom:function(){this.getProducts()},getAddressDefault:function(){var e=this;(0,l.getAddressDefault)().then((function(t){var i=t.data;Array.isArray(i)||e.onAddressChange(i.id,i,!0)}))},onCollage:function(){var t=this;if(!this.isLogin)return this.isShowAuth=!0;(0,d.hasCollage)().then((function(i){var s=i.data.collageId;s?e.navigateTo({url:"/pages/store/group_buy/index?collage_id=".concat(s)}):(t.getAddressDefault(),t.$refs.addressWindow.getAddressList(),t.collageVisible=!0)}))},onCollageClose:function(){this.collageVisible=!1},initCollage:function(){var t=this,i={store_id:this.collageStore.id,address_id:this.collageAddress.id||0,shipping_type:1==this.collageDelivery?3:2};(0,d.initCollage)(i).then((function(i){t.collageVisible=!1,e.navigateTo({url:"/pages/store/group_buy/index?collage_id=".concat(i.data.collageId)})})).catch((function(e){t.$util.Tips({title:e})}))},collageDeliveryChange:function(e){(2!=e||this.info.is_store)&&(this.collageDelivery=e)},onAddress:function(){this.address.address=!this.address.address,this.pagesUrl="/pages/users/user_address_list/index?isCollage=1&store_id=".concat(this.info.id),this.$refs.addressWindow.getAddressList()},onAddressChange:function(e,t,i){var s=this;(0,d.isWithin)({store_id:this.collageStore.id,address_id:e}).then((function(){i||s.onAddress(),s.collageAddress=t,s.address.addressId=t})).catch((function(){i||s.$util.Tips({title:"您选择的地址超出门店配送范围，请重新选择"})}))}}};t.default=f}).call(this,i("543d")["default"])},"5d84":function(e,t,i){"use strict";i.r(t);var s=i("6b42"),r=i("833c");for(var o in r)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(o);i("2598");var n=i("f0c5"),a=Object(n["a"])(r["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],void 0);t["default"]=a.exports},"6b42":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return s}));var s={uniBadge:function(){return i.e("uni_modules/uni-badge/components/uni-badge/uni-badge").then(i.bind(null,"f8f0"))}},r=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.productList,(function(t,i){var s=e.__get_orig(t),r=t.price.toString().split("."),o=t.price.toString().split(".").length,n=o>1?t.price.toString().split("."):null;return{$orig:s,g0:r,g1:o,g2:n}}))),s=e.productList.length,r=0==e.productList.length&&e.where.page>1;e.$mp.data=Object.assign({},{$root:{l0:i,g3:s,g4:r}})},o=[]},"7c0f":function(e,t,i){},"833c":function(e,t,i){"use strict";i.r(t);var s=i("44aa"),r=i.n(s);for(var o in s)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(o);t["default"]=r.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/store_cate/store_cate2-create-component',
    {
        'pages/store_cate/store_cate2-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("5d84"))
        })
    },
    [['pages/store_cate/store_cate2-create-component']]
]);
